"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3544],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),f=u(a),m=r,y=f["".concat(l,".").concat(m)]||f[m]||p[m]||i;return a?n.createElement(y,o(o({ref:t},c),{},{components:a})):n.createElement(y,o({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},2440:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],s={sidebar_position:3},l="Yubikey(s) with Vegas",u={unversionedId:"yubikeys/vegas",id:"yubikeys/vegas",title:"Yubikey(s) with Vegas",description:"1. In your ~/.aws/config you should have the mfaserial configured and matching the Virtual MFA Device_ serial we configured in the previous step:",source:"@site/docs/yubikeys/vegas.md",sourceDirName:"yubikeys",slug:"/yubikeys/vegas",permalink:"/docs/yubikeys/vegas",editUrl:"https://github.com/aripalo/vegas-credentials/tree/main/packages/create-docusaurus/templates/shared/docs/yubikeys/vegas.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"AWS MFA Setup",permalink:"/docs/yubikeys/aws-mfa"},next:{title:"CLI",permalink:"/docs/cli"}},c={},p=[{value:"Multiple Yubikeys",id:"multiple-yubikeys",level:2},{value:"Multiple Source Profiles with different Yubikeys",id:"multiple-source-profiles-with-different-yubikeys",level:3}],f={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"yubikeys-with-vegas"},"Yubikey(s) with Vegas"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In your ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.aws/config")," you should have the ",(0,i.kt)("inlineCode",{parentName:"p"},"mfa_serial")," configured and matching the ",(0,i.kt)("em",{parentName:"p"},"Virtual MFA Device")," serial we configured in the previous step:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# ~/.aws/config\n[default]\nmfa_serial = arn:aws:iam::111111111111:mfa/FrankSinatra\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Configure the Yubikey OATH account "label":'),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# ~/.aws/config\n[default]\nmfa_serial = arn:aws:iam::111111111111:mfa/FrankSinatra\nvegas_yubikey_label = Amazon Web Services:FrankSinatra@vegas-demo-account\n")),(0,i.kt)("p",{parentName:"li"},"The format usually follows ",(0,i.kt)("inlineCode",{parentName:"p"},"<issuer>:<account-name>"),". If you added the account via ",(0,i.kt)("inlineCode",{parentName:"p"},"ykman")," CLI it is possible to use other formats as well: One popular choice is to use the same value as ",(0,i.kt)("inlineCode",{parentName:"p"},"mfa_serial")," (such as ",(0,i.kt)("inlineCode",{parentName:"p"},"arn:aws:iam::111111111111:mfa/FrankSinatra"),"), in that case you don't need to provide the ",(0,i.kt)("inlineCode",{parentName:"p"},"vegas_yubikey_label")," configuration options and ",(0,i.kt)("inlineCode",{parentName:"p"},"vegas-credentials")," will automatically use the value of ",(0,i.kt)("inlineCode",{parentName:"p"},"mfa_serial")," as the account label."))),(0,i.kt)("h2",{id:"multiple-yubikeys"},"Multiple Yubikeys"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"IF")," you are using multiple Yubikey Devices, you must configure the ",(0,i.kt)("em",{parentName:"p"},"Device Serial Number")," into your ",(0,i.kt)("inlineCode",{parentName:"p"},"~/.aws/config")," as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# ~/.aws/config\n[default]\nmfa_serial = arn:aws:iam::111111111111:mfa/FrankSinatra\nvegas_yubikey_serial = 12345678\n")),(0,i.kt)("h3",{id:"multiple-source-profiles-with-different-yubikeys"},"Multiple Source Profiles with different Yubikeys"),(0,i.kt)("p",null,"This is especially useful if you have let's say separate work and hobby AWS accounts you use as the source profiles and you also have two different Yubikeys you use for work and hobbies."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"# ~/.aws/config\n[profile work]\nmfa_serial = arn:aws:iam::111111111111:mfa/FrankSinatra\nvegas_yubikey_serial = 12345678\n\n[profile hobby]\nmfa_serial = arn:aws:iam::999999999999:mfa/Frankie\nvegas_yubikey_serial = 87654321\n")))}m.isMDXComponent=!0}}]);